"use strict";function ginit(){}var backend_url="https://asia-northeast1-url-redirect-bb.cloudfunctions.net/redirect-node",app=new Vue({el:"#app",data:{islogin:!1,username:"",InputUrl:"",CustomKey:"",FlashStatus:"",FlashData:{},FormProccessing:!1,entries:null},methods:{create:function(){var e=this;this.FlashStatus="",this.FormProccessing=!0;var t={token:gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token,op:"create",url:this.InputUrl};""!==this.CustomKey&&(t.key=this.CustomKey),$.get({url:backend_url,data:t}).done(function(t){e.InputUrl="",e.CustomKey="",e.FlashStatus="success",e.FlashData=t,app.query()}).fail(function(t){e.FlashData=t.responseText,e.FlashStatus="failed"}).always(function(){e.FormProccessing=!1})},query:function(){var e=this,t={token:gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token,op:"query"};$.get({url:backend_url,data:t}).done(function(t){e.entries=t.data,console.log(t)}).fail(function(t){e.FlashData=t.responseText,e.FlashStatus="failed",e.entries=[]})},logout:function(){gapi.auth2.getAuthInstance().signOut(),this.islogin=!1,this.FlashStatus="",this.entries=[]},format_date:function(t){return new Date(t/1e3).toLocaleDateString("en-US",{month:"short",year:"numeric",day:"2-digit"})},remove_http:function(t){return t.replace(/^https?:\/\//i,"")},delete_confirm:function(t){var e=t.currentTarget,n=e.dataset.key;tippy(e,{interactive:!0,appendTo:"parent",trigger:"manual",placement:"bottom",arrow:!0,theme:"light-border",distance:5,duration:[300,50],onHidden:function(t){t.destroy()},content:document.querySelector('.entry[data-key="'.concat(n,'"] .delete-confirm-template')).innerHTML}),e._tippy.show(),$('.tippy-tooltip .confirm-tip-btn[data-key="'.concat(n,'"]')).one("click",function(t){var e=t.currentTarget.dataset.key;document.querySelector('.entry-delete-btn[data-key="'.concat(e,'"]'))._tippy.hide(),app.delete_entry(e)}),$('.entry[data-key="'.concat(n,'"]')).one("mouseleave",function(t){document.querySelector('.entry-delete-btn[data-key="'.concat(t.currentTarget.dataset.key,'"]'))._tippy.hide()})},delete_entry:function(e){var n=this,t={token:gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token,op:"delete",key:e};$.get({url:backend_url,data:t}).done(function(){var t=$('.entry[data-key="'+e+'"] > .entry-deleted-mask');t.addClass("show"),setTimeout(function(){t.removeClass("show"),n.entries.splice(n.entries.findIndex(function(t){return t.key===e}),1)},1e3)}).fail(function(t){n.FlashData=t.responseText,n.FlashStatus="failed"})}}});function onSignIn(t){var e=t.getBasicProfile();app.islogin=!0,app.username=e.getName(),app.query()}var clipboard=new ClipboardJS(".clip-btn");clipboard.on("success",function(t){tippy(t.trigger,{content:"Copied!",trigger:"manual",placement:"right",duration:[150,200]}),t.trigger._tippy.show(),setTimeout(function(){t.trigger._tippy.hide()},700),t.clearSelection()}),window.addEventListener("scroll",function(){return tippy.hideAll({duration:0})});
//# sourceMappingURL=index.js.map
